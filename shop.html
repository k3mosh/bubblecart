<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shop.css">
    <title>SHOP</title>
</head>

<body>
    <header class="w-full h-[70px] bg-[#2B8A6D] shadow-md flex items-center z-50 justify-between md:pr-6 px-6 md:px-0 md:pl-40 md:justify-none fixed top-0">
        <div class="flex items-center">   
            <div class="h-[45px] w-auto mr-10">
                <img src="../asset/logo.png" alt="logo" class="w-auto h-[45px] ">
            </div>
            <div class="w-fit h-fit hidden sm:block flex ">
                <a class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out" href="index.html">Home</a>
                <a class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out mx-6" href="shop.html">Craft Now</a>
                <a class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out" href="about.html">About Us</a>
            </div>
        </div>
        <div class="flex items-center hidden sm:block">
            <!-- These will be conditionally shown/hidden -->
            <a class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out login-link "  id="login-link" href="user_login.html">Log In</a>
            <a class="font-bold text-[18px] text-[#004D40] mx-6 hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out " id="signup-link" href="user_signup.html">Sign Up</a>
            <a class="font-bold text-[18px] text-[#004D40] hidden md:mr-6 account-tab" id="account-tab" href="account.html">Account</a> <!-- Initially hidden -->
            <a class="fa-solid fa-user text-[#0E2E24] text-[20px] text-center cursor-pointer" href="admin.html"></a>
        </div>
        <div id="burger" class="flex flex-col justify-between w-8 h-6 cursor-pointer md:hidden">
            <span class="bar bg-[#004D40] h-1 w-full origin-center transition-transform duration-300 ease-in-out"></span>
            <span class="bar bg-[#004D40] h-1 w-full origin-center transition-transform duration-300 ease-in-out"></span>
            <span class="bar bg-[#004D40] h-1 w-full origin-center transition-transform duration-300 ease-in-out"></span>
        </div>
    </header>

    <section class="flavors-section">
        <h1>Explore Our Flavors</h1>
        <div class="flavors-container" id="flavors-container">
            <!-- Menu items will be loaded dynamically here -->
        </div>
    </section>

    <!-- Cart Modal -->
    <div id="cart-modal" class="cart-modal">
        <div class="cart-header">
            <h2>Shopping Cart</h2>
            <button id="close-cart" class="close-cart" aria-label="Close cart">&times;</button>
        </div>
        <div class="cart-items">
            <!-- Items dynamically added here -->
        </div>
        <div class="cart-footer">
            <h3>Total: â‚±<span id="cart-total">0</span></h3>
            <button id="checkout-btn" class="checkout-btn">Check Out</button>
        </div>
    </div>

    <div id="menu" class="md:hidden fixed top-0 mt-[70px] left-0 w-full h-full z-50 flex justify-end opacity-0 translate-x-full transition-all ease-in-out duration-300">
        <div id="content" class="w-[240px] relative h-full bg-[#5CA891] py-[20px] flex flex-col items-center">
            <div class="flex justify-end items-center w-full h-fit pr-6"> 
                <a class="fa-solid fa-user text-[#0E2E24] text-[20px] text-center cursor-pointer" href="admin.html"></a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-4"> 
                <a href="index.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out">Home</a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-4"> 
                <a href="shop.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out">Craft Now</a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-4"> 
                <a href="about.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out">About Us</a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-4"> 
                <a href="user_login.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out login-link" id="login-link" >Log In</a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-4"> 
                <a href="user_signup.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out signup-link " id="signup-link" >Sign Up</a>
            </div>
            <div class="flex justify-start items-center w-full h-fit pl-6 my-[-47px]"> 
                <a href="account.html" class="font-bold text-[18px] text-[#004D40] hover:text-[#b4e2d5] transition-colors duration-300 ease-in-out hidden account-tab" id="account-tab">Account</a>
            </div>
        </div>
    </div>

    <!-- Floating Cart Tab -->
    <div id="cart-tab" class="cart-tab">
        <div class="cart-tab-content">
            <img src="/asset/cart.png" alt="Cart Icon">
            <span id="cart-count">0</span>
        </div>
    </div>

    <script src="./js/shop.js">
       
    </script>
    <script>
   document.addEventListener('DOMContentLoaded', () => {
    const username = sessionStorage.getItem('username');
    
    const loginLink = document.getElementById('login-link');
    const signupLink = document.getElementById('signup-link');
    const accountTab = document.getElementById('account-tab');

    // Show/hide based on login state
    if (username) {
        loginLink.classList.add('hidden');
        signupLink.classList.add('hidden');
        accountTab.classList.remove('hidden');

    } else {
        loginLink.classList.remove('hidden');
        signupLink.classList.remove('hidden');
        accountTab.classList.add('hidden');

    }
    
    const burgerMenu = document.getElementById('menu');
        const loginLinkBurger = burgerMenu.querySelector('.login-link');
        const signupLinkBurger = burgerMenu.querySelector('.signup-link');
        const accountTabBurger = burgerMenu.querySelector('.account-tab');

        if (username) {
            loginLinkBurger.classList.add('hidden');
            signupLinkBurger.classList.add('hidden');
            accountTabBurger.classList.remove('hidden');
        } else {
            loginLinkBurger.classList.remove('hidden');
            signupLinkBurger.classList.remove('hidden');
            accountTabBurger.classList.add('hidden');
        }



    // Carousel functionality
    const items = document.querySelectorAll('.carousel-item');
    let currentIndex = 0;

    function initializeCarousel() {
        items.forEach((item, index) => {
            item.classList.remove(
                'scale-[1.3]',
                'z-50',
                'opacity-100',
                'translate-x-[-150px]',
                'translate-x-[150px]',
                'z-10',
                'opacity-80'
            );

            if (index === currentIndex) {
                item.classList.add('scale-[1.3]', 'z-50', 'opacity-100');
            } else if (index === (currentIndex + 1) % items.length) {
                item.classList.add('translate-x-[150px]', 'z-10', 'opacity-80');
            } else if (index === (currentIndex - 1 + items.length) % items.length) {
                item.classList.add('translate-x-[-150px]', 'z-10', 'opacity-80');
            }
        });
    }

    function rotateCarousel() {
        if (items.length === 0) return;
        currentIndex = (currentIndex + 1) % items.length;
        initializeCarousel();
    }

    initializeCarousel();
    setInterval(rotateCarousel, 3000);

    // Menu toggle functionality
    const burger = document.getElementById("burger");
    const menu = document.getElementById("menu");

    burger.addEventListener('click', () => {
        menu.classList.toggle("opacity-0");
        menu.classList.toggle("opacity-100");
        menu.classList.toggle("translate-x-full");
        menu.classList.toggle("translate-x-0");
        burger.classList.toggle("open");
    });
});
</script>
</body>
</html>
